import{$ as et,A as j,B as N,C as $,D as H,E as O,H as P,I as D,J as W,L as q,N as z,O as R,P as Y,V as G,W as J,X as K,Y as X,Z,_ as tt,a as I,aa as nt,b as v,ba as ot,c,ca as it,d as g,da as rt,e as _,ea as at,f as k,fa as st,ga as u,h as l,ha as ct,i as E,ia as lt,j as F,ja as mt,k as T,ka as pt,l as b,m as M,n as L,o as Q,p as o,q as n,r as d,s as S,t as y,u as x,v as U,w as r,x as V,y as A,z as B}from"./chunk-USXAX7YZ.js";import"./chunk-SRUD5PB2.js";import"./chunk-YWO3IHIW.js";import"./chunk-SD5XCXOE.js";import"./chunk-JV7ON635.js";import"./chunk-F7XBNY6P.js";import"./chunk-EXRUNRTN.js";import"./chunk-C4TORFO5.js";import"./chunk-UHUGRIBZ.js";import"./chunk-4WFVMWDK.js";import"./chunk-4I6HJA6T.js";import"./chunk-NMYJD6OP.js";import"./chunk-B43CU5JX.js";import"./chunk-TQEIIVVC.js";import"./chunk-LF5XB4YN.js";import{a as m,b as p}from"./chunk-NWJ5J3BN.js";var f={botUrl:"https://t.me/referal_prototype_bot",apiUrl:"https://7bf4-82-102-46-11.ngrok-free.app"};var h=class e{httpClient=c(O);async getContacts(i){return I(this.httpClient.get(`${f.apiUrl}/invites/${i}`,{headers:{"ngrok-skip-browser-warning":"69420"}}))}static \u0275fac=function(t){return new(t||e)};static \u0275prov=v({token:e,factory:e.\u0275fac,providedIn:"root"})};var ft={loading:!0,contacts:[],error:void 0},w=ct(mt(ft),lt((e,i=c(h))=>({async getContacts(t){try{u(e,a=>p(m({},a),{loading:!0}));let s=await i.getContacts(t);u(e,a=>p(m({},a),{contacts:s,loading:!1}))}catch{u(e,a=>p(m({},a),{error:"Failed to fetch contacts.",loading:!1}))}}})));var ht=(e,i)=>i.id;function Ct(e,i){if(e&1&&(o(0,"p"),r(1),n()),e&2){let t=x().$implicit;l(),A("@",t.username,"")}}function gt(e,i){if(e&1){let t=S();o(0,"ion-item",10,0),y("click",function(){g(t);let a=U(9);return _(a.checked=!a.checked)}),o(2,"ion-avatar"),d(3,"img",11),n(),o(4,"ion-label",12)(5,"h3"),r(6),n(),T(7,Ct,2,1,"p"),n(),d(8,"ion-checkbox",5,1),n()}if(e&2){let t=i.$implicit;l(3),b("src",t.photo_url,k),l(3),V(t.first_name),l(),M(t.username?7:-1)}}function _t(e,i){if(e&1){let t=S();o(0,"ion-item")(1,"ion-label"),r(2,"No results found."),n(),o(3,"ion-button",13),y("click",function(){g(t);let a=x();return _(a.copyUserId())}),r(4,"Invite"),n()()}}var dt=class e{contactsStore=c(w);appStore=c(pt);toastCtrl=c(it);searchQuery=E("");async ngOnInit(){await this.contactsStore.getContacts(this.appStore.user().id)}filteredContacts=H(()=>{let i=this.searchQuery().toLowerCase();return this.contactsStore.contacts().filter(t=>t.first_name.toLowerCase().includes(i))});async copyUserId(){let i=`${f.botUrl}?start=${this.appStore.user().id}`;try{await navigator.clipboard.writeText(i),await(await this.toastCtrl.create({message:"Link copied \u{1F517}",duration:3e3})).present()}catch{await(await this.toastCtrl.create({message:"Failed to copy the link \u{1F630}",duration:3e3})).present()}}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=F({type:e,selectors:[["app-contacts"]],inputs:{searchQuery:[1,"searchQuery"]},outputs:{searchQuery:"searchQueryChange"},features:[$([w])],decls:36,vars:3,consts:[["item",""],["checkbox",""],[3,"color"],["slot","start"],["defaultHref","home"],["slot","end"],["value","default"],["value","segment"],["placeholder","Search Users",3,"ngModelChange","ngModel"],["detail","false","button",""],["detail","false","button","",3,"click"],["alt","User Avatar",3,"src"],[2,"margin-left","1rem","text-overflow","elipsis","overflow","hidden","white-space","nowrap"],["slot","end",3,"click"]],template:function(t,s){t&1&&(o(0,"ion-header")(1,"ion-toolbar",2)(2,"ion-buttons",3),d(3,"ion-back-button",4),n(),o(4,"ion-title"),r(5,"Contacts"),n()(),o(6,"ion-toolbar")(7,"ion-list")(8,"ion-item")(9,"ion-label"),r(10,"Your Contacts are your resources"),n(),o(11,"ion-label",5),r(12,"0"),n()(),o(13,"ion-item")(14,"ion-label"),r(15,"Already Recommended"),n(),o(16,"ion-label",5),r(17,"0"),n()()()(),o(18,"ion-toolbar")(19,"ion-segment",6)(20,"ion-segment-button",6)(21,"ion-label"),r(22,"All Friends"),n()(),o(23,"ion-segment-button",7)(24,"ion-label"),r(25,"Select"),n()()()(),o(26,"ion-toolbar")(27,"ion-searchbar",8),N("ngModelChange",function(C){return j(s.searchQuery,C)||(s.searchQuery=C),C}),n()()(),o(28,"ion-content")(29,"ion-list")(30,"ion-list-header")(31,"ion-label"),r(32,"Friends list"),n()(),L(33,gt,10,3,"ion-item",9,ht,!1,_t,5,0,"ion-item"),n()()),t&2&&(l(),b("color",s.appStore.isLightTheme()?"primary":""),l(26),B("ngModel",s.searchQuery),l(6),Q(s.filteredContacts()))},dependencies:[J,ot,nt,G,Y,q,st,et,X,at,Z,tt,K,rt,W,P,D,R,z],styles:["ion-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}"]})};export{dt as ContactsComponent};
