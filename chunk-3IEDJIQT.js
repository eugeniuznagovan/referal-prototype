import{$ as oe,A as j,B,C as H,D as V,E as $,F as Y,I as q,J as z,K as R,M as G,O as J,Q as K,W as X,X as Z,Y as ee,Z as te,_ as ne,a as y,aa as ie,b as I,ba as re,c,ca as ae,d as E,da as le,e as w,ea as se,f as k,fa as ce,g as M,ga as me,h as r,ha as S,i as U,ia as pe,j as u,ja as de,k as A,ka as ue,l,la as f,m as F,n as P,o as T,p as o,q as t,r as m,s as L,t as Q,u as W,v as N,w as a,x as b,y as O,z as D}from"./chunk-36P5RGZX.js";import"./chunk-SRUD5PB2.js";import"./chunk-YWO3IHIW.js";import"./chunk-SD5XCXOE.js";import"./chunk-JV7ON635.js";import"./chunk-F7XBNY6P.js";import"./chunk-EXRUNRTN.js";import"./chunk-C4TORFO5.js";import"./chunk-UHUGRIBZ.js";import"./chunk-4WFVMWDK.js";import"./chunk-4I6HJA6T.js";import"./chunk-NMYJD6OP.js";import"./chunk-B43CU5JX.js";import"./chunk-TQEIIVVC.js";import"./chunk-LF5XB4YN.js";import{a as v,b as h}from"./chunk-NWJ5J3BN.js";function ve(n,i){n&1&&(o(0,"p"),a(1,"Loading..."),t())}function he(n,i){if(n&1&&(o(0,"div",0),B(1),o(2,"div",1)(3,"div",2),m(4,"ion-icon",3)(5,"ion-icon",3),t(),m(6,"ion-icon",3)(7,"ion-icon",3)(8,"ion-icon",3),t(),o(9,"div",4),m(10,"ion-icon",3)(11,"ion-icon",3),t()()),n&2){let e=W().referralCount();r(4),l("ngClass",e>=1?"green":"gray"),r(),l("ngClass",e>=2?"green":"gray"),r(),l("ngClass",e>=3?"green":"gray"),r(),l("ngClass",e>=4?"green":"gray"),r(),l("ngClass",e>=5?"green":"gray"),r(2),l("ngClass",e>=6?"green":"gray"),r(),l("ngClass",e>=7?"green":"gray")}}var g=class n{referralCount=k(void 0);static \u0275fac=function(e){return new(e||n)};static \u0275cmp=u({type:n,selectors:[["app-invite-status"]],inputs:{referralCount:[1,"referralCount"]},decls:2,vars:1,consts:[[1,"circle","circle-third"],[1,"circle","circle-second"],[1,"circle","circle-first"],["name","person-circle",3,"ngClass"],[2,"display","flex","align-items","center","padding-right","3px"]],template:function(e,s){e&1&&A(0,ve,2,0,"p")(1,he,12,7,"div",0),e&2&&F(s.referralCount()?1:0)},dependencies:[se,$],styles:["ion-icon[_ngcontent-%COMP%]{border-radius:10px}ion-icon.green[_ngcontent-%COMP%]{background:var(--ion-color-strong-green);color:var(--ion-color-light-green)}ion-icon.gray[_ngcontent-%COMP%]{background:var(--ion-color-light);color:var(--ion-color-normal-gray)}.circle[_ngcontent-%COMP%]{display:flex;padding:3px;border-radius:12px;align-items:center;margin-right:2px}.circle-third[_ngcontent-%COMP%]{background:var(--ion-color-strong-blue)}.circle-second[_ngcontent-%COMP%]{background:var(--ion-color-normal-blue)}.circle-first[_ngcontent-%COMP%]{background:var(--ion-color-light-blue)}"]})};var _={apiUrl:"https://55e3-82-102-46-12.ngrok-free.app"};var C=class n{#e=c(Y);async getInvitedUsers(i){return y(this.#e.get(`${_.apiUrl}/invites/${i}`))}async inviteUser(i){return y(this.#e.post(`${_.apiUrl}/addUser`,i))}static \u0275fac=function(e){return new(e||n)};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})};var ye={loading:!0,error:void 0,contacts:[]},x=pe(ue(ye),de({async onInit(n,i=c(f),e=c(C)){let s=i.user()?.id;if(!s)throw new Error("Missing telegram user");try{let d=await e.getInvitedUsers(s);S(n,p=>h(v({},p),{contacts:d}))}catch{S(n,p=>h(v({},p),{error:"Failed to fetch invited users"}))}}}));var be=(n,i)=>i.username;function Se(n,i){if(n&1){let e=L();o(0,"ion-item",10,0),Q("click",function(){E(e);let d=N(11);return w(d.checked=!d.checked)}),o(2,"ion-avatar"),m(3,"img",11),t(),o(4,"ion-label",12)(5,"h3"),a(6),t(),o(7,"p"),a(8),t()(),m(9,"app-invite-status",13)(10,"ion-checkbox",5,1),t()}if(n&2){let e=i.$implicit;r(3),l("src",e.photo_url,M),r(3),b(e.first_name),r(2),b(e.username),r(),l("referralCount",2)}}function _e(n,i){n&1&&(o(0,"ion-item")(1,"ion-label"),a(2,"No results found."),t()())}var ge=class n{store=c(x);appStore=c(f);searchQuery=U("");filteredContacts=V(()=>{let i=this.searchQuery().toLowerCase();return this.store.contacts().filter(e=>e.first_name.toLowerCase().includes(i)||e?.last_name?.toLowerCase().includes(i)||e?.username?.toLowerCase().includes(i))});static \u0275fac=function(e){return new(e||n)};static \u0275cmp=u({type:n,selectors:[["app-contacts"]],inputs:{searchQuery:[1,"searchQuery"]},outputs:{searchQuery:"searchQueryChange"},features:[H([x])],decls:41,vars:3,consts:[["item",""],["checkbox",""],[3,"color"],["slot","start"],["defaultHref","home"],["slot","end"],["value","default"],["value","segment"],["placeholder","Search Users",3,"ngModelChange","ngModel"],["detail","false","button",""],["detail","false","button","",3,"click"],["alt","User Avatar",3,"src"],[2,"margin-left","1rem","text-overflow","elipsis","overflow","hidden","white-space","nowrap"],[2,"margin-right","1rem",3,"referralCount"]],template:function(e,s){e&1&&(o(0,"ion-header")(1,"ion-toolbar",2)(2,"ion-buttons",3),m(3,"ion-back-button",4),t(),o(4,"ion-title"),a(5,"Contacts"),t()(),o(6,"ion-toolbar")(7,"ion-list")(8,"ion-item")(9,"ion-label"),a(10,"Your Contacts are your resources"),t(),o(11,"ion-label",5),a(12,"9"),t()(),o(13,"ion-item")(14,"ion-label"),a(15,"Your Contacts are your resources"),t(),o(16,"ion-label",5),a(17,"5"),t()(),o(18,"ion-item")(19,"ion-label"),a(20,"Already Recommended"),t(),o(21,"ion-label",5),a(22,"2"),t()()()(),o(23,"ion-toolbar")(24,"ion-segment",6)(25,"ion-segment-button",6)(26,"ion-label"),a(27,"All Friends"),t()(),o(28,"ion-segment-button",7)(29,"ion-label"),a(30,"Select"),t()()()(),o(31,"ion-toolbar")(32,"ion-searchbar",8),j("ngModelChange",function(p){return D(s.searchQuery,p)||(s.searchQuery=p),p}),t()()(),o(33,"ion-content")(34,"ion-list")(35,"ion-list-header")(36,"ion-label"),a(37,"Friends list"),t()(),P(38,Se,12,4,"ion-item",9,be,!1,_e,3,0,"ion-item"),t()()),e&2&&(r(),l("color",s.appStore.isLightTheme()?"primary":""),r(31),O("ngModel",s.searchQuery),r(6),T(s.filteredContacts()))},dependencies:[Z,ae,re,X,K,G,me,ie,te,ce,ne,oe,ee,J,le,R,q,z,g],styles:["ion-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}"]})};export{ge as ContactsComponent};
