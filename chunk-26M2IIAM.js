import{$ as nt,A as N,B as H,E as O,F as P,G as $,I as D,K as W,L as q,M as z,S as R,T as Y,U as G,V as J,W as K,X,Y as Z,Z as tt,_ as et,a as x,aa as ot,b as I,ba as it,c as l,ca as rt,d as g,da as u,e as b,ea as at,f as v,fa as st,g as c,ga as lt,h as k,ha as ct,i as E,j as S,k as F,l as T,m as n,n as e,o as d,p as _,q as y,r as M,s as L,t as r,u as Q,v as U,w as V,x as A,y as B,z as j}from"./chunk-SQSW5C7U.js";import"./chunk-SRUD5PB2.js";import"./chunk-YWO3IHIW.js";import"./chunk-SD5XCXOE.js";import"./chunk-JV7ON635.js";import"./chunk-F7XBNY6P.js";import"./chunk-EXRUNRTN.js";import"./chunk-C4TORFO5.js";import"./chunk-UHUGRIBZ.js";import"./chunk-4WFVMWDK.js";import"./chunk-4I6HJA6T.js";import"./chunk-NMYJD6OP.js";import"./chunk-B43CU5JX.js";import"./chunk-TQEIIVVC.js";import"./chunk-LF5XB4YN.js";import{a as m,b as p}from"./chunk-NWJ5J3BN.js";var f={botUrl:"https://t.me/referal_prototype_bot",apiUrl:"https://6e08-82-102-46-11.ngrok-free.app"};var h=class o{httpClient=l(H);async getContacts(i){return x(this.httpClient.get(`${f.apiUrl}/invites/${i}`,{headers:{"ngrok-skip-browser-warning":"69420"}}))}static \u0275fac=function(t){return new(t||o)};static \u0275prov=I({token:o,factory:o.\u0275fac,providedIn:"root"})};var dt={loading:!0,contacts:[],error:void 0},w=at(lt(dt),st((o,i=l(h))=>({async getContacts(t){try{u(o,a=>p(m({},a),{loading:!0}));let s=await i.getContacts(t);u(o,a=>p(m({},a),{contacts:s,loading:!1}))}catch{u(o,a=>p(m({},a),{error:"Failed to fetch contacts.",loading:!1}))}}})));var ut=(o,i)=>i.id;function ft(o,i){if(o&1){let t=_();n(0,"ion-item",10,0),y("click",function(){g(t);let a=L(10);return b(a.checked=!a.checked)}),n(2,"ion-avatar"),d(3,"img",11),e(),n(4,"ion-label",12)(5,"h3"),r(6),e(),n(7,"p"),r(8),e()(),d(9,"ion-checkbox",5,1),e()}if(o&2){let t=i.$implicit;c(3),S("src",t.photo_url,v),c(3),Q(t.first_name),c(2),U("@",t.username,"")}}function ht(o,i){if(o&1){let t=_();n(0,"ion-item")(1,"ion-label"),r(2,"No results found."),e(),n(3,"ion-button",13),y("click",function(){g(t);let a=M();return b(a.copyUserId())}),r(4,"Invite"),e()()}}var mt=class o{contactsStore=l(w);appStore=l(ct);toastCtrl=l(nt);searchQuery=k("");async ngOnInit(){await this.contactsStore.getContacts(this.appStore.user().id)}filteredContacts=N(()=>{let i=this.searchQuery().toLowerCase();return this.contactsStore.contacts().filter(t=>t.first_name.toLowerCase().includes(i))});async copyUserId(){let i=`${f.botUrl}?start=${this.appStore.user().id}`;try{await navigator.clipboard.writeText(i),await(await this.toastCtrl.create({message:"Link copied \u{1F517}",duration:3e3})).present()}catch{await(await this.toastCtrl.create({message:"Failed to copy the link \u{1F630}",duration:3e3})).present()}}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=E({type:o,selectors:[["app-contacts"]],inputs:{searchQuery:[1,"searchQuery"]},outputs:{searchQuery:"searchQueryChange"},features:[j([w])],decls:36,vars:3,consts:[["item",""],["checkbox",""],[3,"color"],["slot","start"],["defaultHref","home"],["slot","end"],["value","default"],["value","segment"],["placeholder","Search Users",3,"ngModelChange","ngModel"],["detail","false","button",""],["detail","false","button","",3,"click"],["alt","User Avatar",3,"src"],[2,"margin-left","1rem","text-overflow","elipsis","overflow","hidden","white-space","nowrap"],["slot","end",3,"click"]],template:function(t,s){t&1&&(n(0,"ion-header")(1,"ion-toolbar",2)(2,"ion-buttons",3),d(3,"ion-back-button",4),e(),n(4,"ion-title"),r(5,"Contacts"),e()(),n(6,"ion-toolbar")(7,"ion-list")(8,"ion-item")(9,"ion-label"),r(10,"Your Contacts are your resources"),e(),n(11,"ion-label",5),r(12,"0"),e()(),n(13,"ion-item")(14,"ion-label"),r(15,"Already Recommended"),e(),n(16,"ion-label",5),r(17,"0"),e()()()(),n(18,"ion-toolbar")(19,"ion-segment",6)(20,"ion-segment-button",6)(21,"ion-label"),r(22,"All Friends"),e()(),n(23,"ion-segment-button",7)(24,"ion-label"),r(25,"Select"),e()()()(),n(26,"ion-toolbar")(27,"ion-searchbar",8),B("ngModelChange",function(C){return A(s.searchQuery,C)||(s.searchQuery=C),C}),e()()(),n(28,"ion-content")(29,"ion-list")(30,"ion-list-header")(31,"ion-label"),r(32,"Friends list"),e()(),F(33,ft,11,3,"ion-item",9,ut,!1,ht,5,0,"ion-item"),e()()),t&2&&(c(),S("color",s.appStore.isLightTheme()?"primary":""),c(26),V("ngModel",s.searchQuery),c(6),T(s.filteredContacts()))},dependencies:[Y,et,tt,R,z,D,rt,Z,J,it,K,X,G,ot,$,O,P,q,W],styles:["ion-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}"]})};export{mt as ContactsComponent};
