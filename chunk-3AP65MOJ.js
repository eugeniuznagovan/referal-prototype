import{$ as oe,A as B,B as D,C as j,D as H,E as $,F as W,I as Y,J as q,K as z,M as R,O as G,P as J,Q as K,W as X,X as Z,Y as ee,Z as te,_ as ne,a as E,aa as ie,b as M,ba as re,c as m,ca as ae,d as S,da as le,e as _,ea as ce,f as T,fa as se,g as F,ga as me,h as a,ha as pe,i as L,ia as C,j as g,ja as de,k as P,ka as ue,l as c,la as ge,m as O,ma as fe,n as Q,o as U,p as o,q as t,r as p,s as x,t as I,u as f,v as N,w as r,x as w,y as V,z as A}from"./chunk-Z634EVRX.js";import"./chunk-SRUD5PB2.js";import"./chunk-YWO3IHIW.js";import"./chunk-SD5XCXOE.js";import"./chunk-JV7ON635.js";import"./chunk-F7XBNY6P.js";import"./chunk-EXRUNRTN.js";import"./chunk-C4TORFO5.js";import"./chunk-UHUGRIBZ.js";import"./chunk-4WFVMWDK.js";import"./chunk-4I6HJA6T.js";import"./chunk-NMYJD6OP.js";import"./chunk-B43CU5JX.js";import"./chunk-TQEIIVVC.js";import"./chunk-LF5XB4YN.js";import{a as d,b as u}from"./chunk-NWJ5J3BN.js";function be(n,i){n&1&&(o(0,"p"),r(1,"Loading..."),t())}function ve(n,i){if(n&1&&(o(0,"div",0),D(1),o(2,"div",1)(3,"div",2),p(4,"ion-icon",3)(5,"ion-icon",3),t(),p(6,"ion-icon",3)(7,"ion-icon",3)(8,"ion-icon",3),t(),o(9,"div",4),p(10,"ion-icon",3)(11,"ion-icon",3),t()()),n&2){let e=f().referralCount();a(4),c("ngClass",e>=1?"green":"gray"),a(),c("ngClass",e>=2?"green":"gray"),a(),c("ngClass",e>=3?"green":"gray"),a(),c("ngClass",e>=4?"green":"gray"),a(),c("ngClass",e>=5?"green":"gray"),a(2),c("ngClass",e>=6?"green":"gray"),a(),c("ngClass",e>=7?"green":"gray")}}var h=class n{referralCount=T(void 0);static \u0275fac=function(e){return new(e||n)};static \u0275cmp=g({type:n,selectors:[["app-invite-status"]],inputs:{referralCount:[1,"referralCount"]},decls:2,vars:1,consts:[[1,"circle","circle-third"],[1,"circle","circle-second"],[1,"circle","circle-first"],["name","person-circle",3,"ngClass"],[2,"display","flex","align-items","center","padding-right","3px"]],template:function(e,l){e&1&&P(0,be,2,0,"p")(1,ve,12,7,"div",0),e&2&&O(l.referralCount()?1:0)},dependencies:[se,$],styles:["ion-icon[_ngcontent-%COMP%]{border-radius:10px}ion-icon.green[_ngcontent-%COMP%]{background:var(--ion-color-strong-green);color:var(--ion-color-light-green)}ion-icon.gray[_ngcontent-%COMP%]{background:var(--ion-color-light);color:var(--ion-color-normal-gray)}.circle[_ngcontent-%COMP%]{display:flex;padding:3px;border-radius:12px;align-items:center;margin-right:2px}.circle-third[_ngcontent-%COMP%]{background:var(--ion-color-strong-blue)}.circle-second[_ngcontent-%COMP%]{background:var(--ion-color-normal-blue)}.circle-first[_ngcontent-%COMP%]{background:var(--ion-color-light-blue)}"]})};var y={botUrl:"https://t.me/referal_prototype_bot",apiUrl:"https://6e08-82-102-46-11.ngrok-free.app"};var b=class n{httpClient=m(W);async getContacts(i){return E(this.httpClient.get(`${y.apiUrl}/invites/${i}`))}static \u0275fac=function(e){return new(e||n)};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})};var Se={loading:!0,contacts:[],error:void 0},k=de(ge(Se),ue((n,i=m(b))=>({async getContacts(e){try{C(n,s=>u(d({},s),{loading:!0}));let l=await i.getContacts(e);C(n,s=>u(d({},s),{contacts:l,loading:!1}))}catch{C(n,s=>u(d({},s),{error:"Failed to fetch contacts.",loading:!1}))}}})));var _e=(n,i)=>i.username;function xe(n,i){if(n&1){let e=x();o(0,"ion-item",10,0),I("click",function(){S(e);let s=N(11);return _(s.checked=!s.checked)}),o(2,"ion-avatar"),p(3,"img",11),t(),o(4,"ion-label",12)(5,"h3"),r(6),t(),o(7,"p"),r(8),t()(),p(9,"app-invite-status",13)(10,"ion-checkbox",5,1),t()}if(n&2){let e=i.$implicit;a(3),c("src",e.avatar,F),a(3),w(e.name),a(2),w(e.username),a(),c("referralCount",e.referralCount)}}function Ie(n,i){if(n&1){let e=x();o(0,"ion-item")(1,"ion-label"),r(2,"No results found."),t(),o(3,"ion-button",14),I("click",function(){S(e);let s=f();return _(s.copyUserId())}),r(4,"Invite"),t()()}}var he=class n{contactsStore=m(k);appStore=m(fe);toastCtrl=m(le);searchQuery=L("");async ngOnInit(){await this.contactsStore.getContacts(this.appStore.user().id)}filteredContacts=H(()=>{let i=this.searchQuery().toLowerCase();return this.contactsStore.contacts().filter(e=>e.name.toLowerCase().includes(i)||e.username.toLowerCase().includes(i)||e.email.toLowerCase().includes(i))});async copyUserId(){let i=`${y.botUrl}?start=${this.appStore.user().id}`;try{await navigator.clipboard.writeText(i),await(await this.toastCtrl.create({message:"Link copied \u{1F517}",duration:3e3})).present()}catch{await(await this.toastCtrl.create({message:"Failed to copy the link \u{1F630}",duration:3e3})).present()}}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=g({type:n,selectors:[["app-contacts"]],inputs:{searchQuery:[1,"searchQuery"]},outputs:{searchQuery:"searchQueryChange"},features:[j([k])],decls:41,vars:3,consts:[["item",""],["checkbox",""],[3,"color"],["slot","start"],["defaultHref","home"],["slot","end"],["value","default"],["value","segment"],["placeholder","Search Users",3,"ngModelChange","ngModel"],["detail","false","button",""],["detail","false","button","",3,"click"],["alt","User Avatar",3,"src"],[2,"margin-left","1rem","text-overflow","elipsis","overflow","hidden","white-space","nowrap"],[2,"margin-right","1rem",3,"referralCount"],["slot","end",3,"click"]],template:function(e,l){e&1&&(o(0,"ion-header")(1,"ion-toolbar",2)(2,"ion-buttons",3),p(3,"ion-back-button",4),t(),o(4,"ion-title"),r(5,"Contacts"),t()(),o(6,"ion-toolbar")(7,"ion-list")(8,"ion-item")(9,"ion-label"),r(10,"Your Contacts are your resources"),t(),o(11,"ion-label",5),r(12,"0"),t()(),o(13,"ion-item")(14,"ion-label"),r(15,"Your Contacts are your resources"),t(),o(16,"ion-label",5),r(17,"0"),t()(),o(18,"ion-item")(19,"ion-label"),r(20,"Already Recommended"),t(),o(21,"ion-label",5),r(22,"0"),t()()()(),o(23,"ion-toolbar")(24,"ion-segment",6)(25,"ion-segment-button",6)(26,"ion-label"),r(27,"All Friends"),t()(),o(28,"ion-segment-button",7)(29,"ion-label"),r(30,"Select"),t()()()(),o(31,"ion-toolbar")(32,"ion-searchbar",8),B("ngModelChange",function(v){return A(l.searchQuery,v)||(l.searchQuery=v),v}),t()()(),o(33,"ion-content")(34,"ion-list")(35,"ion-list-header")(36,"ion-label"),r(37,"Friends list"),t()(),Q(38,xe,12,4,"ion-item",9,_e,!1,Ie,5,0,"ion-item"),t()()),e&2&&(a(),c("color",l.appStore.isLightTheme()?"primary":""),a(31),V("ngModel",l.searchQuery),a(6),U(l.filteredContacts()))},dependencies:[Z,ae,re,X,K,R,pe,ie,te,me,ne,oe,ee,G,ce,z,Y,q,h,J],styles:["ion-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}"]})};export{he as ContactsComponent};
