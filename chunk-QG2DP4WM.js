import{$ as ne,C as A,D as H,E as O,G as P,I as $,J as D,P as W,Q as Y,R as q,S as R,T as z,U as G,V as J,W as K,X,Y as Z,Z as ee,_ as te,a as w,aa as d,b as I,ba as oe,c as l,ca as ie,d as C,da as re,e as g,ea as ae,f as c,g as k,h as v,i as E,j as F,k as T,l as n,m as e,n as b,o as S,p as y,q as M,r as L,s as r,t as _,u as Q,v as U,w as V,x as B,y as j,z as N}from"./chunk-NDOP77OY.js";import"./chunk-SRUD5PB2.js";import"./chunk-YWO3IHIW.js";import"./chunk-SD5XCXOE.js";import"./chunk-JV7ON635.js";import"./chunk-F7XBNY6P.js";import"./chunk-EXRUNRTN.js";import"./chunk-C4TORFO5.js";import"./chunk-UHUGRIBZ.js";import"./chunk-4WFVMWDK.js";import"./chunk-4I6HJA6T.js";import"./chunk-NMYJD6OP.js";import"./chunk-B43CU5JX.js";import"./chunk-TQEIIVVC.js";import"./chunk-LF5XB4YN.js";import{a as m,b as p}from"./chunk-NWJ5J3BN.js";var u={botUrl:"https://t.me/referal_prototype_bot",apiUrl:"https://6e08-82-102-46-11.ngrok-free.app"};var f=class o{httpClient=l(N);async getContacts(i){return w(this.httpClient.get(`${u.apiUrl}/invites/${i}`,{headers:{"ngrok-skip-browser-warning":"69420"}}))}static \u0275fac=function(t){return new(t||o)};static \u0275prov=I({token:o,factory:o.\u0275fac,providedIn:"root"})};var ce={loading:!0,contacts:[],error:void 0},x=oe(re(ce),ie((o,i=l(f))=>({async getContacts(t){try{d(o,a=>p(m({},a),{loading:!0}));let s=await i.getContacts(t);d(o,a=>p(m({},a),{contacts:s,loading:!1}))}catch{d(o,a=>p(m({},a),{error:"Failed to fetch contacts.",loading:!1}))}}})));var me=(o,i)=>i.id;function pe(o,i){if(o&1){let t=S();n(0,"ion-item",10,0),y("click",function(){C(t);let a=L(8);return g(a.checked=!a.checked)}),n(2,"ion-label",11)(3,"h3"),r(4),e(),n(5,"p"),r(6),e()(),b(7,"ion-checkbox",5,1),e()}if(o&2){let t=i.$implicit;c(4),_(t.first_name),c(2),_(t.id)}}function de(o,i){if(o&1){let t=S();n(0,"ion-item")(1,"ion-label"),r(2,"No results found."),e(),n(3,"ion-button",12),y("click",function(){C(t);let a=M();return g(a.copyUserId())}),r(4,"Invite"),e()()}}var se=class o{contactsStore=l(x);appStore=l(ae);toastCtrl=l(Z);searchQuery=k("");async ngOnInit(){await this.contactsStore.getContacts(this.appStore.user().id)}filteredContacts=j(()=>{let i=this.searchQuery().toLowerCase();return this.contactsStore.contacts().filter(t=>t.first_name.toLowerCase().includes(i))});async copyUserId(){let i=`${u.botUrl}?start=${this.appStore.user().id}`;try{await navigator.clipboard.writeText(i),await(await this.toastCtrl.create({message:"Link copied \u{1F517}",duration:3e3})).present()}catch{await(await this.toastCtrl.create({message:"Failed to copy the link \u{1F630}",duration:3e3})).present()}}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=v({type:o,selectors:[["app-contacts"]],inputs:{searchQuery:[1,"searchQuery"]},outputs:{searchQuery:"searchQueryChange"},features:[B([x])],decls:41,vars:3,consts:[["item",""],["checkbox",""],[3,"color"],["slot","start"],["defaultHref","home"],["slot","end"],["value","default"],["value","segment"],["placeholder","Search Users",3,"ngModelChange","ngModel"],["detail","false","button",""],["detail","false","button","",3,"click"],[2,"margin-left","1rem","text-overflow","elipsis","overflow","hidden","white-space","nowrap"],["slot","end",3,"click"]],template:function(t,s){t&1&&(n(0,"ion-header")(1,"ion-toolbar",2)(2,"ion-buttons",3),b(3,"ion-back-button",4),e(),n(4,"ion-title"),r(5,"Contacts"),e()(),n(6,"ion-toolbar")(7,"ion-list")(8,"ion-item")(9,"ion-label"),r(10,"Your Contacts are your resources"),e(),n(11,"ion-label",5),r(12,"0"),e()(),n(13,"ion-item")(14,"ion-label"),r(15,"Your Contacts are your resources"),e(),n(16,"ion-label",5),r(17,"0"),e()(),n(18,"ion-item")(19,"ion-label"),r(20,"Already Recommended"),e(),n(21,"ion-label",5),r(22,"0"),e()()()(),n(23,"ion-toolbar")(24,"ion-segment",6)(25,"ion-segment-button",6)(26,"ion-label"),r(27,"All Friends"),e()(),n(28,"ion-segment-button",7)(29,"ion-label"),r(30,"Select"),e()()()(),n(31,"ion-toolbar")(32,"ion-searchbar",8),V("ngModelChange",function(h){return U(s.searchQuery,h)||(s.searchQuery=h),h}),e()()(),n(33,"ion-content")(34,"ion-list")(35,"ion-list-header")(36,"ion-label"),r(37,"Friends list"),e()(),F(38,pe,9,2,"ion-item",9,me,!1,de,5,0,"ion-item"),e()()),t&2&&(c(),E("color",s.appStore.isLightTheme()?"primary":""),c(31),Q("ngModel",s.searchQuery),c(6),T(s.filteredContacts()))},dependencies:[Y,X,K,W,D,P,ne,J,R,te,z,G,q,ee,O,A,H,$],styles:["ion-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}"]})};export{se as ContactsComponent};
